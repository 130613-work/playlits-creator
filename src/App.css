/* =========================================
   1. VARIABLES & RESET
   ========================================= */
:root {
  --bts-purple: #8A2BE2;
  --bts-dark: #0f0f11;
  --bg-dark: #18181b;
  --bg-sidebar: #09090b;
  --text-main: #ffffff;
  --text-muted: #a1a1aa;
  --spotify-green: #1DB954;
}

* { box-sizing: border-box; }

body {
  margin: 0; padding: 0;
  font-family: 'Inter', system-ui, -apple-system, sans-serif;
  background-color: var(--bg-dark);
  color: var(--text-main);
  /* En PC ocultamos scroll del body porque usamos contenedores internos */
  overflow: hidden; 
}

/* =========================================
   2. LAYOUT PRINCIPAL
   ========================================= */
.builder-layout {
  display: flex;
  height: 100vh;
  width: 100vw;
  overflow: hidden;
}

/* --- COLUMNA IZQUIERDA (CONTROLES) --- */
.builder-sidebar {
  width: 380px;
  min-width: 380px;
  background-color: var(--bg-sidebar);
  border-right: 1px solid rgba(255,255,255,0.05);
  padding: 25px;
  display: flex;
  flex-direction: column;
  gap: 15px;
  overflow-y: auto;
  z-index: 10;
}

/* --- COLUMNA DERECHA (BUSCADOR Y LISTA) --- */
.builder-content {
  flex: 1;
  background-color: var(--bg-dark);
  padding: 30px 40px;
  overflow-y: auto; /* Scroll vertical para el contenido */
  display: flex;
  flex-direction: column;
  gap: 20px;
}

/* =========================================
   3. COMPONENTES SIDEBAR
   ========================================= */
.playlist-cover-gen {
  width: 100%;
  aspect-ratio: 1;
  background: linear-gradient(135deg, #2a2a2e 0%, #1a1a1c 100%);
  border-radius: 12px;
  border: 2px dashed #444;
  display: flex; align-items: center; justify-content: center;
  font-size: 3rem; color: #555; cursor: pointer; transition: 0.3s;
  overflow: hidden;
}
.playlist-cover-gen:hover { border-color: var(--bts-purple); color: var(--bts-purple); }
.playlist-cover-gen.active { border: none; }

.input-title, .input-desc {
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.1);
  color: white; padding: 12px; border-radius: 8px; font-size: 1rem; outline: none; width: 100%;
}
.input-title { font-weight: bold; font-size: 1.2rem; }
.input-desc { font-size: 0.9rem; resize: none; height: 80px; font-family: inherit; }
.input-title:focus, .input-desc:focus { border-color: var(--bts-purple); }

.bias-box { background: rgba(0,0,0,0.3); padding: 15px; border-radius: 12px; margin-top: 10px; }
.bias-header { display: flex; justify-content: space-between; font-size: 0.8rem; color: #aaa; margin-bottom: 8px; }
.bias-bar { height: 8px; background: #333; border-radius: 4px; display: flex; overflow: hidden; margin-bottom: 10px; }
.bias-seg { height: 100%; }
.bias-legend { display: flex; flex-wrap: wrap; gap: 8px; font-size: 0.7rem; color: #888; }
.legend-dot { width: 6px; height: 6px; border-radius: 50%; display: inline-block; margin-right: 4px; }

.btn-shuffle-smart {
  background: linear-gradient(90deg, #333, #444); color: white; border: none; padding: 12px; border-radius: 8px;
  cursor: pointer; font-weight: 600; transition: 0.2s; margin-top: auto;
}
.btn-shuffle-smart:hover { background: #555; }

.btn-publish-big {
  background: var(--bts-purple); color: white; border: none; padding: 16px; border-radius: 12px;
  font-size: 1.1rem; font-weight: bold; cursor: pointer;
  box-shadow: 0 4px 15px rgba(138, 43, 226, 0.4);
  transition: transform 0.2s; margin-top: 10px;
}
.btn-publish-big:hover:not(:disabled) { transform: translateY(-2px); }
.btn-publish-big:disabled { background: #333; color: #666; cursor: not-allowed; box-shadow: none; }

/* =========================================
   4. BUSCADOR Y RESULTADOS (AHORA HORIZONTAL)
   ========================================= */
.search-bar-wrapper {
  display: flex; gap: 10px;
  background: rgba(255,255,255,0.05); padding: 8px; border-radius: 50px;
  border: 1px solid rgba(255,255,255,0.1); width: 100%;
}
.search-input { flex: 1; background: transparent; border: none; outline: none; color: white; padding: 0 15px; font-size: 1rem; }
.btn-search-icon {
  background: var(--bts-purple); color: white; border: none;
  width: 40px; height: 40px; border-radius: 50%; cursor: pointer;
}

/* --- AQU√ç EST√Å EL CAMBIO: Resultados en Scroll Horizontal --- */
.results-grid {
  display: flex;           /* Pone los elementos en una fila */
  gap: 15px;               /* Espacio entre tarjetas */
  overflow-x: auto;        /* üö® Activa el scroll horizontal */
  padding-bottom: 15px;    /* Deja espacio para la barra de scroll */
  width: 100%;             /* Ocupa todo el ancho disponible */

  /* Estilo de barra de scroll fina y discreta */
  scrollbar-width: thin;
  scrollbar-color: #444 transparent;
}

/* Personalizaci√≥n de la barra para Chrome/Edge (opcional, para que se vea mejor) */
.results-grid::-webkit-scrollbar {
  height: 8px;
}
.results-grid::-webkit-scrollbar-track {
  background: transparent;
}
.results-grid::-webkit-scrollbar-thumb {
  background: #444;
  border-radius: 4px;
}
.results-grid::-webkit-scrollbar-thumb:hover {
  background: var(--bts-purple); /* Se pone morada al tocarla */
}


/* Las tarjetas de las canciones */
.result-card {
  /* üî• ESTAS 3 L√çNEAS SON LA SOLUCI√ìN: */
  flex-shrink: 0;          /* üö® ¬°IMPORTANTE! Proh√≠be que se aplasten */
  width: 140px;            /* Ancho fijo */
  min-width: 140px;        /* Seguridad extra */

  /* Resto del dise√±o (igual que antes) */
  background: #27272a;
  border-radius: 8px;
  padding: 10px;
  cursor: pointer;
  transition: 0.2s;
  position: relative;
  display: flex;
  flex-direction: column;
}
.result-card:hover { background: #3f3f46; transform: translateY(-3px); }
.result-card img { width: 100%; aspect-ratio: 1; border-radius: 6px; margin-bottom: 8px; object-fit: cover; }
.result-info h5 { margin: 0; font-size: 0.85rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.result-info p { margin: 0; font-size: 0.75rem; color: #a1a1aa; }

.btn-add-mini {
  position: absolute; bottom: 50px; right: 5px;
  width: 28px; height: 28px; background: var(--bts-purple);
  color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center;
  font-weight: bold; box-shadow: 0 4px 10px rgba(0,0,0,0.5); opacity: 0; transition: 0.2s;
}
.result-card:hover .btn-add-mini { opacity: 1; bottom: 60px; }
.pulsate { animation: pulse 1.5s infinite; }
@keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }


/* =========================================
   5. LISTA DE CANCIONES (DRAFT) - VUELVE A SER VERTICAL
   ========================================= */
.track-list-container {
  background: rgba(0,0,0,0.2);
  border-radius: 16px;
  padding: 20px;
  /* Altura m√≠nima para arrastrar */
  min-height: 200px;
}

.list-row {
  display: flex; /* Fila horizontal */
  align-items: center; 
  gap: 15px;
  background: #27272a; 
  padding: 10px 15px;
  margin-bottom: 8px; 
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,0.05);
  transition: background 0.2s;
}

.list-row.is-dragging { 
  background: #3f3f46; 
  border-color: var(--bts-purple); 
  box-shadow: 0 5px 20px rgba(0,0,0,0.5); 
}

/* Elementos dentro de la fila */
.drag-handle { cursor: grab; color: #555; font-size: 1.2rem; }
.list-row img { width: 48px; height: 48px; border-radius: 4px; object-fit: cover; }
.row-info { flex: 1; } /* El texto ocupa el espacio sobrante */
.tag-bts { background: rgba(138, 43, 226, 0.2); color: #d8b4fe; font-size: 0.7rem; padding: 2px 8px; border-radius: 4px; font-weight: bold; }


/* =========================================
   6. MODALES Y PHOTOCARD
   ========================================= */
.modal-overlay-2 {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background: rgba(0,0,0,0.85); backdrop-filter: blur(5px);
  display: flex; align-items: center; justify-content: center; z-index: 10000;
}
.modal-content-small, .share-content {
  background: #18181b; padding: 30px; border-radius: 20px;
  width: 90%; max-width: 400px; text-align: center;
  border: 1px solid #333; box-shadow: 0 20px 50px rgba(0,0,0,0.5);
}
.input-number { font-size: 2rem; width: 80px; text-align: center; background: #333; border: none; color: white; border-radius: 8px; padding: 10px; margin: 20px 0; }
.modal-actions { display: flex; justify-content: center; gap: 15px; }
.btn-cancel { background: transparent; color: #aaa; border: 1px solid #444; padding: 10px 20px; border-radius: 8px; cursor: pointer; }
.btn-confirm { background: var(--bts-purple); color: white; border: none; padding: 10px 20px; border-radius: 8px; font-weight: bold; cursor: pointer; }
.btn-share { display: inline-block; padding: 10px 20px; border-radius: 8px; text-decoration: none; color: white; font-weight: bold; margin: 0 5px; }
.share-x { background: #000; border: 1px solid #333; }
.share-wa { background: #25D366; }
.btn-close-text { background: transparent; border: none; color: #777; margin-top: 15px; cursor: pointer; text-decoration: underline; }
.btn-download-card {
  background: linear-gradient(90deg, #ff00cc, #333399); color: white; border: none; padding: 12px 24px; border-radius: 99px;
  font-weight: bold; cursor: pointer; margin: 0 auto 20px auto; display: block;
}

/* Estilos Photocard */
.photocard-preview-container { display: flex; justify-content: center; margin: 20px 0; }
.photocard-node {
  width: 300px; height: 450px; background: linear-gradient(135deg, #000000, #2e1065, #000000);
  border: 4px solid var(--bts-purple); border-radius: 20px; padding: 20px;
  display: flex; flex-direction: column; align-items: center; position: relative;
  box-shadow: 0 0 30px rgba(138, 43, 226, 0.4); font-family: 'Inter', sans-serif; overflow: hidden;
}
.photocard-node::before {
  content: 'ARMY'; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-45deg);
  font-size: 6rem; font-weight: 900; color: rgba(255, 255, 255, 0.03); pointer-events: none;
}
.pc-header { font-size: 0.8rem; letter-spacing: 3px; color: #a855f7; margin-bottom: 15px; font-weight: 800; text-transform: uppercase; z-index: 1; }
.pc-image { width: 220px; height: 220px; object-fit: cover; border-radius: 12px; box-shadow: 0 10px 20px rgba(0,0,0,0.5); margin-bottom: 20px; border: 2px solid rgba(255,255,255,0.2); z-index: 1; }
.pc-title { font-size: 1.4rem; font-weight: 800; color: white; text-align: center; margin-bottom: 5px; line-height: 1.2; text-shadow: 0 0 10px rgba(138, 43, 226, 0.8); z-index: 1; }
.pc-subtitle { font-size: 0.9rem; color: #d4d4d8; margin-bottom: 20px; z-index: 1; }
.pc-stats { display: flex; gap: 15px; background: rgba(255,255,255,0.1); padding: 8px 16px; border-radius: 50px; border: 1px solid rgba(255,255,255,0.1); z-index: 1; }
.pc-stat-item { font-size: 0.8rem; color: white; font-weight: 600; }
.purple-txt { color: #c084fc; }
.pc-footer { margin-top: auto; font-size: 0.7rem; color: #52525b; letter-spacing: 1px; z-index: 1; }

/* =========================================
   7. RESPONSIVE (ARREGLADO)
   ========================================= */
@media (max-width: 768px) {
  /* Habilitamos el scroll en todo el cuerpo para celular */
  body { overflow: auto; }

  .builder-layout {
    flex-direction: column;
    overflow-y: visible; /* Deja que el contenido fluya */
    height: auto;
  }

  .builder-sidebar {
    width: 100%;
    min-width: 0;
    padding: 20px;
    border-right: none;
    border-bottom: 1px solid #333;
    /* Quitamos el scroll interno y dejamos que use el de la p√°gina */
    overflow: visible; 
  }

  .builder-content {
    overflow: visible;
    padding: 20px;
    height: auto;
    padding-bottom: 80px; /* Espacio extra al final para scroll */
  }

  /* El buscador se queda pegado arriba al bajar */
  .search-bar-wrapper {
    position: sticky;
    top: 10px;
    z-index: 50;
    backdrop-filter: blur(10px);
    background: rgba(255,255,255,0.1);
  }
}
